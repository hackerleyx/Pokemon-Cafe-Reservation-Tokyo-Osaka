# 宝可梦咖啡预定辅助工具



## Description/项目简介

一个帮助你按照预设信息自动提交、自动刷新预定宝可梦咖啡的chrome扩展程序，东京和大阪的宝可梦咖啡均可使用。

### 功能

1. 自动刷新：如网站显示繁忙（“アクセスが集中し、サイトが混み合っております。The site is congested due to heavy access.”），程序将自动帮你安全的刷新网站。
- 自动点击/执行预定网站上的必要按钮/操作。
- 我们需要确认您是人类 - 选择图片的页面、填写预定信息页面的确认及后续操作除外。因为：确认人类页面只能手工完成
2. 按照你设定的人数、日期快速自动点选相关内容
3. 优先按照ABCD席顺序自动选择仍有空位的最早时间
- 程序的逻辑是这样的，在你选择的日期中，优先找A席是否有空位，A席都没有的话找B席，以此类推；找到可预定的席位后，按照时间顺序，选择最早的位置。
- 所以：如果你需要指定席位/时间，当前这个程序可能不太适合你（但是也许后续会更新这个功能）
4. 自动帮你填入你预设的信息
    - 做这个功能的目的是以防你不知道预定网站信息的校验标准/看不懂日语或英语/来不及看导致你提交失败。虽然你进入到这个页面已经表示你已经锁定刚才选择的位置了（你有20分钟用来提交后面的信息），但很有可能网站繁忙，一直在刷新，超过20分钟后，如果你没有预定成功，你锁定的位置将被释放出来。
    - 该功能不会向预定网站之外的其他地方上传你的个人信息，个人信息只会保存在你本地，扩展程序没有任何上传数据的功能。

5. 可以从预定的任何步骤开始
    - 你可以手工操作到预定网站的任何步骤后点击”开始“，程序会自动识别当前你已经操作过的步骤并第一时间执行下一个必要的步骤。



- 扩展程序目前的功能只能帮你这么多，剩下的请大家拼网速和人品，祝大家预定顺利。




## Installation/安装
### 方法1
1. 下载release中的crx文件
2. 打开Chrome，管理扩展程序，也可以在地址栏直接输入 chrome://extensions
3. 打开右上角“开发者模式”
4. 将下载的crx文件拖拽进chrome
5. 扩展程序中出现“Reserve Pokemon Cafe-Tokyo&Osaka”后，安装完成。

### 方法2
1. 将项目下载并解压缩
2. 打开Chrome，管理扩展程序，也可以在地址栏直接输入 chrome://extensions
3. 打开右上角“开发者模式”
4. 选择“加载未打包的扩展程序”
5. 选择项目所在目录
6. 扩展程序中出现“Reserve Pokemon Cafe-Tokyo&Osaka”后，安装完成。

   > [!WARNING]
   > 安装扩展程序后，存放扩展程序的文件夹（解压缩后的那个）不能移动、更名或删除


## Usage/使用
1. 点击扩展程序的图标，填写预约人数、希望预约的日期、姓名、手机号和email后，点击保存设置。
2. 访问[宝可梦咖啡-东京·日本桥](https://reserve.pokemon-cafe.jp/)或[宝可梦咖啡-大阪·心斋桥](https://osaka.pokemon-cafe.jp/)，右下角出现提示即可正常使用



### 详细说明:

- 如未再扩展程序保存预定信息，访问以上两个网站时，页面会提示“请先点击插件，设置预约信息“

- 默认的“希望预约的日期”是当天能够预约的最新一天（新的预约在日本时间18:00开始）

- 如右下角显示当前正在进行的步骤，且有“开始”按钮，请点击“开始”运行程序

- 如服务器繁忙，提示“アクセスが集中し、サイトが混み合っております。The site is congested due to heavy access.“程序将自动帮你刷新页面，无需手动干预

- 所有的按钮程序都将自动帮你点击，但以下页面除外：

    - 我们需要确认您是人类 - 选择图片的页面
        - 你需要按照提示，手动选择正确的图片（一般是5个），然后手动点击“确认”
    - 填写预定信息的页面
        - 你预设的信息将自动填充到相应字段，单你需要手动点击“提交”以及进行后面的步骤，包括查看你的邮箱，在下一个页面输入你的“認証コード”（会是大写小写字符数字组成的6为代码），以及后续确认预定的相关工作。



### 重要提示

因为宝可梦咖啡的预定非常火爆，一般会在1分钟内被预订一空，所以，你可以/应该：

- 在日本时间17:55左右（北京时间下午4:55，以下所有时间按日本时间说，国内减1小时），首次访问该网站，并完成“我们需要确认您是人类”的相关操作，每次验证大约能够维持5-10分钟，所以不要太早验证，以防在18:00的时候跳转到该验证，错失良机。
- 你可以停留在选择完人数后，等待时间到17:59再点击“开始”
    - 解释一下：
        - 程序会自动判断你当前的环节/步骤，并自动开始下一步，所以不用担心程序会从头开始
        - 程序设定了如果时间在17:59-18:00之间，程序会自动暂停所有操作，直至18:00:00时自动开始，避免因过快/过慢点击造成“日期尚未开放”或“手慢无”
        - 目前测试的情况是，程序在暂停操作时，页面没有任何显示，不要慌，程序在运行，不要额外操作扩展程序和刷新页面，这个问题我会尽快修复。
- 预约信息设置注意事项：
    1. 人数最少填1，最大填6
    2. 姓名填拼音即可，注意姓和名之间必须要有空格，如“Zhang San”
    3. 手机号填写你国内的手机号即可，但需要注意格式，如果你的手机号是13012345678的话，可以写成13012345678、8613012345678、008613012345678，这几种在网站验证时都能通过，如果你写成了+8613012345678，程序将自动帮你变换为008613012345678并填充在网站上。
    4. 电子邮件大家随意，我用的gmail，所以新浪\qq\网易等等邮箱都没有测试过，大家可以小红书上看一看，能不能接收验证码。



### 其他预定技巧

#### 以下内容来自reddit的机器翻译

- 如果你错过了下午 6:00 的机会，请在 20 分钟或 40 分钟后再次等待。有时甚至在晚上 7 点，这取决于每轮还有多少可用。在这里，你可以准备好页面直到时间选择，然后在 06:20:00 或 06:40:00 标记处刷新。每 20 分钟尝试一次，直到日本标准时间晚上 7 点或 7:20
- 从日本标准时间晚上 9:40 开始，在你的目标日期的前一两天查看。从这里开始，二十分钟规则仍然适用。再次检查，确切时间是晚上 10 点，10:20，然后每隔二十分钟。这些取消出现的可能性很高，来自那些倒卖者未售出的时段。这种方式也是获得预订的最不费力的方式。
- 宝可梦咖啡馆有一个“没有预订”的等候队伍，供当天直接上门的顾客使用。如果你有耐心并且有时间等待，你可能会很幸运，并与你的团队一起就座。桌子会在最后一刻为未出现或迟到的顾客空出来。（并没有测试过，有成功使用此方式的朋友们可以issue一下。）


## Acknowledgments/致谢🙏

[reserve-pokemon-cafe](https://github.com/asdofe/reserve-pokemon-cafe) - 本项目基于asdofe的项目进一步开发，感谢大神的思路和代码基础。

[All the pokemon cafe reservation tips gathered](https://www.reddit.com/r/JapanTravelTips/comments/1dr614w/all_the_pokemon_cafe_reservation_tips_gathered/) - reddit关于宝可梦咖啡预定的攻略。

感谢我女儿，她是我写这个插件的动力，所以程序的图标用了我女儿最喜欢的百变怪。


